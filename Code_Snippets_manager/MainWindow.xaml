<Window x:Class="Code_Snippets_manager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Code_Snippets_manager"
        xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
        xmlns:BoundCodeData="clr-namespace:Code_Snippets_manager.Services"
        mc:Ignorable="d"
        Title="Code Snippet Manager" Height="900" MinHeight="700" Width="1400" MinWidth="1100" 
        WindowStartupLocation="CenterScreen" Loaded="Window_Loaded">






    <Window.Resources>
        <!-- Button Styles -->
        <Style x:Key="ButtonBase" TargetType="{x:Type Button}">
            <Setter Property="Height" Value="32"/>
            <Setter Property="Padding" Value="15,5"/>
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonBase}">
            <Setter Property="Background" Value="#007ACC"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style x:Key="DangerButton" TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonBase}">
            <Setter Property="Background" Value="#DC3545"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="TextBoxBase" TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
        </Style>

        <!-- ComboBox Style -->
        <Style x:Key="ComboBoxBase" TargetType="{x:Type ComboBox}">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
        </Style>

        <!-- Watermark TextBlock Style -->
        <Style x:Key="WatermarkText" TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="Gray"/>
            <Setter Property="Margin" Value="5,0,0,0"/>
        </Style>
        
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260" MinWidth="260"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="*" MinWidth="800"/>
        </Grid.ColumnDefinitions>

        <!-- Left Panel -->
        <DockPanel Grid.Column="0" Margin="10">



            <!-- Top Search  -->
            <TextBox DockPanel.Dock="Top" 
                     Height="32" 
                     Margin="0,0,0,10"
                     x:Name="txtSearchbar"
                     Style="{StaticResource TextBoxBase}" TextChanged="txtSearchbar_TextChanged" >
                    
                
                <TextBox.Template>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Grid>
                            <TextBox Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource TextBoxBase}"/>
                            <TextBlock Text=""
                                       x:Name="SearchWatermMark"
                                     Style="{StaticResource WatermarkText}"
                                     />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="" >
                                <Setter TargetName="SearchWatermMark" Property="Text" Value="Search snippets..."/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="SearchWatermMark" Property="Visibility" Value="Hidden"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                        
                    </ControlTemplate>
                    
                </TextBox.Template>
                
            </TextBox>

            
            <!-- Top Buttons -->
            <StackPanel Orientation="Horizontal"   DockPanel.Dock="Top"  Margin="0,0,0,10">
                <TextBlock Text="Select Language" 
                          VerticalAlignment="Center"
                          Margin="0,0,25,0"
                          FontWeight="SemiBold"/>
                <Button Content="Manage Language"  Height="30"   Style="{StaticResource PrimaryButton}" Click="Button_Click_1"/>

            </StackPanel>
            
            
            <!-- Language Selection -->
            <ComboBox DockPanel.Dock="Top" 
                      Height="32" 
                      Margin="0,0,0,10"
                      ItemsSource="{Binding Languages}"
                      SelectedItem="{Binding SelectedLanguage, Mode=TwoWay}"
                      x:Name="CBX_Languages"
                      Style="{StaticResource ComboBoxBase}"/>

            <!-- Tags Section -->
            <DockPanel DockPanel.Dock="Top" LastChildFill="True">
                <TextBlock Text="Tags" 
                          VerticalAlignment="Center"
                          Margin="0,0,5,0"
                          FontWeight="SemiBold"/>
                <Button Content="Manage Tags"
                      Background="#007ACC"
                        Foreground="White"
                        Height="30"
                        DockPanel.Dock="Right"
                        Style="{StaticResource ButtonBase}"
                        Margin="5,0,0,0" Click="Button_Click"/>
                
                <Button Content="ADD"
                        Visibility="Hidden"
                        Width="24"
                        Height="24"
                        DockPanel.Dock="Right"
                        Style="{StaticResource ButtonBase}"/>
            </DockPanel>

            <!-- Tags List -->
            <ListBox DockPanel.Dock="Top"
                     Margin="0,5,0,10"
                     MaxHeight="150"
                     ItemsSource="{Binding Tags}"
                     SelectionMode="Multiple"
                     SelectionChanged="TagsListBox_SelectionChanged">
            </ListBox>
            <Button DockPanel.Dock="Top"
                    Content="+ New Snippet"
                    Margin="0,0,0,10"
                    Style="{StaticResource PrimaryButton}" Click="Button_Click_2"/>
           
            <!-- Snippets List -->
            <ListBox ItemsSource="{Binding FilteredSnippets}" SelectedItem="{Binding SelectedSnippet}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0,5">
                            <TextBlock Text="{Binding Title}" 
                                     FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding Language}" 
                                     Foreground="Gray" 
                                     FontSize="12"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>

        <!-- Splitter -->
        <GridSplitter Grid.Column="1" 
                      Width="5" 
                      HorizontalAlignment="Stretch"/>

        <!-- Right Panel -->
        <Grid Grid.Column="2" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title and Language Section -->
            <StackPanel Grid.Row="0" Margin="0,0,0,10">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160" />
                        <ColumnDefinition Width="*"  />
                        <ColumnDefinition Width="355"/>
                    </Grid.ColumnDefinitions>
                    
                    <ComboBox Width="150" Grid.Column="0"
                                  HorizontalAlignment="Left"
                                          x:Name="CBX_Snippet_Language"
                                          ItemsSource="{Binding Languages}"
                                          SelectedItem="{Binding SelectedSnippet.Language, Mode=TwoWay}"
                                          Style="{StaticResource ComboBoxBase}" SelectionChanged="CBX_Snippet_Language_SelectionChanged"/>
                    
                    
                    
                    

                    <TextBox  Grid.Column="1"
                             Text="{Binding SelectedSnippet.Tags, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource TextBoxBase}">
                        <TextBox.Template>
                            <ControlTemplate TargetType="{x:Type TextBox}">
                                <Grid>
                                    <TextBox Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"
                                            Style="{StaticResource TextBoxBase}"/>

                                    <TextBlock Text="" x:Name="TitleWatermMark"
                                              Style="{StaticResource WatermarkText}"
                                              />
                                </Grid>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="Text" Value="" >
                                        <Setter TargetName="TitleWatermMark" Property="Text" Value="Snippet Tags"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="true">
                                        <Setter TargetName="TitleWatermMark" Property="Visibility" Value="Hidden"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </TextBox.Template>

                    </TextBox>


                    <!-- Buttons -->
                    <StackPanel 
                            Grid.Column="2"
                            Orientation="Horizontal" 
                            HorizontalAlignment="Right"
                            >
                        <Button Content="Preview" 
                            Width="80"
                            
                            Margin="0,0,10,0"
                            Style="{StaticResource ButtonBase}" Click="Button_Click_6"/>
                        <Button Content="Delete" 
                            Width="80"
                            Margin="0,0,10,0"
                            Style="{StaticResource DangerButton}" Click="Button_Click_4"/>
                        <Button Content="Copy" 
                            Width="80"
                            Margin="0,0,10,0"
                            Style="{StaticResource ButtonBase}" Click="Button_Click_3"/>
                        <Button Content="Save" 
                            Width="80"
                            Style="{StaticResource PrimaryButton}" Click="Button_Click_5"/>
                    </StackPanel>
                </Grid>



                <TextBox Height="32"
                         FontSize="16"
                         FontWeight="SemiBold"
                         Margin="0,10,0,0"
                          Text="{Binding SelectedSnippet.Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource TextBoxBase}">
                    <TextBox.Template>
                        <ControlTemplate TargetType="{x:Type TextBox}">
                            <Grid>
                                <TextBox Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"
                                         Style="{StaticResource TextBoxBase}"/>
                                
                                <TextBlock Text="" x:Name="TitleWatermMark"
                                         Style="{StaticResource WatermarkText}"
                                         />
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property="Text" Value="" >
                                    <Setter TargetName="TitleWatermMark" Property="Text" Value="Snippet Title"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter TargetName="TitleWatermMark" Property="Visibility" Value="Hidden"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </TextBox.Template>
                </TextBox>
                
                
            </StackPanel>

            <!-- Description -->
            <TextBox Grid.Row="1"
                     Height="60"
                     Margin="0,0,0,10"
                     Text="{Binding SelectedSnippet.Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     TextWrapping="Wrap"
                     AcceptsReturn="True"
                     Style="{StaticResource TextBoxBase}">
                <TextBox.Template>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Grid>
                            <TextBox Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource TextBoxBase}"/>
                            <TextBlock Text=""
                                        x:Name="DescriptionWatermMark"
                                     Style="{StaticResource WatermarkText}"
                                     />
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="" >
                                <Setter TargetName="DescriptionWatermMark" Property="Text" Value="Enter description..."/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="DescriptionWatermMark" Property="Visibility" Value="Hidden"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </TextBox.Template>
            </TextBox>
            
            

            <!-- Code Editor -->
            <avalonEdit:TextEditor Name="CodeEditor"
                               FontFamily="Consolas"
                               FontSize="14"
                               Grid.Row="2"
                               BorderThickness="1" 
                               BorderBrush="#DDDDDD"
                               BoundCodeData:TextBindingBehavior.BoundText="{Binding SelectedSnippet.SnippetCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                               Background="LightGray"
                               ShowLineNumbers="True"
                               TextChanged="CodeEditor_TextChanged"/>


        </Grid>
    </Grid>
</Window>