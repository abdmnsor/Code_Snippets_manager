<Window x:Class="Code_Snippets_manager.SnippetForm"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
        xmlns:BoundCodeData="clr-namespace:Code_Snippets_manager.Services"
        xmlns:local="clr-namespace:Code_Snippets_manager"
        mc:Ignorable="d"
         Title="Add New Snippet"
        Height="900"
        Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#dbd9d9"
        FontFamily="Segoe UI"
        ResizeMode="NoResize">

    <Grid Margin="20" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Text="➕ Add New Snippet"
                   FontSize="24"
                   FontWeight="Bold"
                   Foreground="Black"
                   Margin="0,0,0,20"/>

        <!-- Snippet Title -->
        <StackPanel Grid.Row="1" Margin="0,5,0,10">
            <TextBlock Text="Snippet Title" FontSize="14" Foreground="Gray"/>
            <TextBox Height="40"
                     FontSize="14"
                     Text="{Binding NewSnippet.Title, Mode=TwoWay}"
                     BorderBrush="Gray"
                     BorderThickness="1"
                     Padding="5"/>
        </StackPanel>

        <!-- Language Selection -->
        <StackPanel Grid.Row="2" Margin="0,5,0,10">
            <TextBlock Text="Select Language" FontSize="14" Foreground="Gray"/>
            <ComboBox Height="40"
                      x:Name="CBX_LanguageAdd"
                      ItemsSource="{Binding Languages}"
                      SelectedItem="{Binding NewSnippet.Language, Mode=TwoWay}"
                      BorderBrush="Gray"
                      BorderThickness="1" SelectionChanged="CBX_LanguageAdd_SelectionChanged"/>
        </StackPanel>

        <!-- Tags Selection -->
        <StackPanel Grid.Row="3" Margin="0,5,0,10">
            <TextBlock Text="Select Tags (Hold CTRL for multiple selection)" FontSize="14" Foreground="Gray"/>
            <ListBox Height="100"
                     ItemsSource="{Binding AvailableTags}"
                     SelectionMode="Multiple"
                     BorderBrush="Gray"
                     BorderThickness="1" SelectionChanged="ListBox_SelectionChanged"/>
        </StackPanel>
        <!-- Snippet Title -->
        <StackPanel Grid.Row="4" Margin="0,5,0,10"  >
            <TextBlock Text="Snippet Description" FontSize="14" Foreground="Gray"/>
            <TextBox Height="100"
                     FontSize="14"
                     Text="{Binding NewSnippet.Description, Mode=TwoWay}"
                     BorderBrush="Gray"
                     BorderThickness="1"
                     Padding="5"/>
        </StackPanel>
        
        <!-- Code Snippet Input -->
        <StackPanel Grid.Row="5" Margin="0,10,0,10">
            <TextBlock Text="Code Snippet" FontSize="14" Foreground="Gray"/>

            <avalonEdit:TextEditor Name="CodeEditor"
                               Padding="5"
                               FontFamily="Consolas"
                               FontSize="14"
                               Height="290"
                               BorderThickness="1" 
                               BorderBrush="#DDDDDD"
                               BoundCodeData:TextBindingBehavior.BoundText="{Binding NewSnippet.SnippetCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                               Background="#F5F5F5"
                               ShowLineNumbers="True"
                               TextChanged="CodeEditor_TextChanged"/>
        </StackPanel>

        <!-- Save Button -->
        <Button Grid.Row="6"
                Content="💾 Save Snippet"
                Background="#0078D7"
                Foreground="White"
                FontSize="16"
                FontWeight="Bold"
                Height="45"
                Width="180"
                HorizontalAlignment="Center"
                Margin="0,10,0,0" Click="Button_Click_1"/>
    </Grid>
</Window>